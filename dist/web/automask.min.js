!function(){var s,e,r,t;(e=s=s||{}).FORWARD="forward",e.BACKWARD="backward",(t=r=r||{}).PATTERN="pattern",t.PREFIX="prefix",t.SUFFIX="suffix",t.DIRECTION="dir",t.ACCEPT="accept",t.SHOW_MASK="show-mask";var c=(Object.defineProperty(n.prototype,"value",{set:function(e){this.element.value=this.prefix+this.reverseIfNeeded(e)+this.suffix},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"selection",{get:function(){return this.element.selectionStart},set:function(e){this.element.selectionStart=this.element.selectionEnd=e},enumerable:!0,configurable:!0}),n.prototype.getRawValue=function(){var e=this.removePrefixAndSuffix(this.element.value);return e=this.removeZeros(e.replace(this.accept,"")),this.reverseIfNeeded(e)},n.prototype.removePrefixAndSuffix=function(e){return e.replace(this.prefix,"").replace(this.suffix,"")},n.prototype.reverseIfNeeded=function(e){if(this.dir!==s.BACKWARD)return e;for(var t="",r=e.length;r;)t+=e[--r];return t},n.prototype.removeZeros=function(e){return this.zeroPadEnabled?e.replace(this.dir===s.FORWARD?/0*$/:/^0*/,""):e},n.getAutoMask=function(e){if(e.autoMask)return e.autoMask;var t=new n;return t.dir=e.getAttribute(r.DIRECTION)||s.FORWARD,t.prefix=e.getAttribute(r.PREFIX)||"",t.suffix=e.getAttribute(r.SUFFIX)||"",t.pattern=t.reverseIfNeeded(e.getAttribute(r.PATTERN)),t.showMask="true"===(e.getAttribute(r.SHOW_MASK)+"").toLowerCase()||!1,t.accept=new RegExp("[^"+(e.getAttribute(r.ACCEPT)||"\\d")+"]","g"),t.element=e,t.zeroPadEnabled=-1!==t.pattern.indexOf("0"),e.maxLength=t.pattern.length+t.prefix.length+t.suffix.length+1,e.autoMask=t},n);function n(){}var i,o=document;function u(e){for(var t,r=c.getAutoMask(e),n=r.pattern.length,i=r.getRawValue(),o="",u=0,a=0;a<n;a++){var f=r.pattern.charAt(a);if(l(i,u)){if(void 0===t&&(t=a),!r.showMask&&!d(r.pattern,a)){if(0===a)return;break}o+=f}else p(f,["_","0"])?o+=i.charAt(u++):o+=f}r.value=o,void 0===t||r.dir===s.BACKWARD?r.selection=e.value.length-r.suffix.length:r.selection=t+r.prefix.length}function l(e,t){return t<0||t>=e.length}function p(t,e){return e.some(function(e){return t===e})}function d(e,t){for(;!l(e,t);){var r=e.charAt(t++);if("0"===r)return!0;if("_"===r)return!1}return!1}i=function(){function e(){var e=t[--r];u(e),e.addEventListener("input",function(){u(e)},!0)}for(var t=function(e){return o.querySelectorAll(e)}('[type="mask"]'),r=t.length;r;)e()},o.addEventListener("DOMContentLoaded",function(){i()})}();