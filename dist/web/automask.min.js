!function(){var u,e,r,t;(e=u=u||{}).FORWARD="forward",e.BACKWARD="backward",(t=r=r||{}).PATTERN="pattern",t.PREFIX="prefix",t.SUFFIX="suffix",t.DIRECTION="dir",t.ACCEPT="accept",t.SHOW_MASK="show-mask";var n,i=document;function a(e){for(var t=h.getAutoMask(e),r=t.pattern.length,n=t.getRawValue(),i="",a=0,s=0;s<r;s++){var o=t.pattern.charAt(s);if(l(n,a)){if(!t.showMask&&!f(t.pattern,s)){if(0===s)return;break}i+=o}else i+=c(o)?n.charAt(a++):o}t.value=i,t.dir===u.BACKWARD&&(t.selection=e.value.length-t.suffix.length)}function l(e,t){return t>=e.length||t<0}function c(e){return"_"===e||("0"===e||""===e)}function f(e,t){for(;!l(e,t);){var r=e.charAt(t++);if("0"===r)return!0;if("_"===r)return!1}return!1}n=function(){function e(){var e=t[--r];a(e),e.addEventListener("input",function(){a(e)},!0)}for(var t=i.querySelectorAll('[type="mask"]'),r=t.length;r;)e()},i.addEventListener("DOMContentLoaded",n);var h=(Object.defineProperty(s.prototype,"value",{set:function(e){var t=this.calcNewSelection();this.element.value=this.prefix+this.reverseIfNeeded(e)+this.suffix,this.selection=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"selection",{get:function(){return this.element.selectionStart},set:function(e){this.element.selectionStart=this.element.selectionEnd=e},enumerable:!0,configurable:!0}),s.prototype.getRawValue=function(){var e=this.removePrefixAndSuffix(this.element.value);return e=this.removeZeros(e.replace(this.deny,"")),this.reverseIfNeeded(e)},s.prototype.isValidKey=function(){return void 0===this.keyPressed||"backspace"===this.keyPressed||!this.deny.test(this.keyPressed)},s.prototype.removePrefixAndSuffix=function(e){return e.replace(this.prefix,"").replace(this.suffix,"")},s.prototype.reverseIfNeeded=function(e){if(this.dir!==u.BACKWARD)return e;for(var t="",r=e.length;r;)t+=e[--r];return t},s.prototype.removeZeros=function(e){return this.zeroPadEnabled?e.replace(this.dir===u.FORWARD?/0*$/:/^0*/,""):e},s.prototype.calcNewSelection=function(){this.dir,u.BACKWARD;var e=this.selection,t=this.prefix+this.pattern;if(console.log("keyPressed: `"+this.keyPressed+"`"),!this.isValidKey())return e-1;for(var r,n="backspace"!==this.keyPressed?1:-1;!c(t.charAt(e-1));)console.log("Not is Placeholder: `"+t.charAt(e-1)+"`"),e+=n;console.log("    Is Placeholder: `"+t.charAt(e-1)+"`");try{r=t.match(new RegExp("([^_0]*[_0]){"+this.getRawValue().length+"}"))[0].length}catch(e){r=t.length}return r<e?r:e},s.prototype.getSelectionPosition=function(){},s.getAutoMask=function(e){if(!e.autoMask)return e.autoMask=s.byElement(e);var t=e.autoMask;return t.lastRawValue=t.currentRawValue,t.currentRawValue=t.getRawValue(),t.currentRawValue.length<t.lastRawValue.length?t.keyPressed="backspace":t.keyPressed=e.value.charAt(t.selection-1),t},s.byElement=function(e){var t=new s;return t.dir=e.getAttribute(r.DIRECTION)||u.FORWARD,t.prefix=e.getAttribute(r.PREFIX)||"",t.suffix=e.getAttribute(r.SUFFIX)||"",t.pattern=t.reverseIfNeeded(e.getAttribute(r.PATTERN)),t.showMask="true"===(e.getAttribute(r.SHOW_MASK)+"").toLowerCase()||!1,t.deny=new RegExp("[^"+(e.getAttribute(r.ACCEPT)||"\\d")+"]","g"),t.element=e,t.zeroPadEnabled=-1!==t.pattern.indexOf("0"),t.currentRawValue=t.getRawValue(),e.maxLength=t.pattern.length+t.prefix.length+t.suffix.length+1,t},s);function s(){}}();