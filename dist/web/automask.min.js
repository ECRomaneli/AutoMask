!function(){var c,e,r,t;(e=c=c||{}).FORWARD="forward",e.BACKWARD="backward",(t=r=r||{}).PATTERN="pattern",t.PREFIX="prefix",t.SUFFIX="suffix",t.DIRECTION="dir",t.ACCEPT="accept",t.SHOW_MASK="show-mask";var l=(Object.defineProperty(n.prototype,"value",{set:function(e){this.element.value=this.prefix+this.reverseIfNeeded(e)+this.suffix},enumerable:!0,configurable:!0}),n.prototype.getRawValue=function(){var e=this.removePrefixAndSuffix(this.element.value);return e=this.removeZeros(e.replace(this.accept,"")),this.reverseIfNeeded(e)},n.prototype.removePrefixAndSuffix=function(e){return e.replace(this.prefix,"").replace(this.suffix,"")},n.prototype.reverseIfNeeded=function(e){if(this.dir!==c.BACKWARD)return e;for(var t="",r=e.length;r;)t+=e[--r];return t},n.prototype.removeZeros=function(e){return this.zeroPadEnabled?e.replace(this.dir===c.FORWARD?/0*$/:/^0*/,""):e},n.getAutoMask=function(e){if(e.autoMask)return e.autoMask;var t=new n;return t.dir=e.getAttribute(r.DIRECTION)||c.FORWARD,t.prefix=e.getAttribute(r.PREFIX)||"",t.suffix=e.getAttribute(r.SUFFIX)||"",t.pattern=t.reverseIfNeeded(e.getAttribute(r.PATTERN)),t.showMask="true"===(e.getAttribute(r.SHOW_MASK)+"").toLowerCase()||!1,t.accept=new RegExp("[^"+(e.getAttribute(r.ACCEPT)||"\\d")+"]","g"),t.element=e,t.zeroPadEnabled=-1!==t.pattern.indexOf("0"),e.maxLength=t.pattern.length+t.prefix.length+t.suffix.length+1,e.autoMask=t},n);function n(){}var i,o=document;function a(e){var t,r=l.getAutoMask(e),n=r.pattern.length,i=r.getRawValue(),o="",a=e.selectionStart,u=0;if(!function(e){return 0===e.length}(i)){for(var f=0;f<n;f++){var s=r.pattern.charAt(f);if(d(i,u)){if(void 0===t&&(t=f,console.log(a,f)),!r.showMask&&!h(r.pattern,f))break;o+=s}else o+=p(s,["_","0"])?i.charAt(u++):s}r.value=o,void 0===t||r.dir===c.BACKWARD?e.selectionStart=e.selectionEnd=e.value.length-r.suffix.length:e.selectionStart=e.selectionEnd=t+r.prefix.length}}function d(e,t){return t<0||t>=e.length}function p(t,e){return e.some(function(e){return t===e})}function h(e,t){for(;!d(e,t);){var r=e.charAt(t++);if("0"===r)return!0;if("_"===r)return!1}return!1}i=function(){function e(){var e=t[--r];a(e),e.addEventListener("input",function(){a(e)},!0)}for(var t=function(e){return o.querySelectorAll(e)}('[type="mask"]'),r=t.length;r;)e()},o.addEventListener("DOMContentLoaded",function(){i()})}();