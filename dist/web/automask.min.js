!function(){var l,e,r,t;(e=l=l||{}).FORWARD="forward",e.BACKWARD="backward",(t=r=r||{}).PATTERN="pattern",t.PREFIX="prefix",t.SUFFIX="suffix",t.DIRECTION="dir",t.ACCEPT="accept",t.SHOW_MASK="show-mask";var p=(Object.defineProperty(n.prototype,"value",{get:function(){return this.removePrefixAndSuffix(this.element.value)},set:function(e){this.element.value=this.prefix+this.reverseIfNeeded(e)+this.suffix},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"selection",{get:function(){return this.element.selectionStart},set:function(e){this.element.selectionStart=this.element.selectionEnd=e},enumerable:!0,configurable:!0}),n.prototype.getRawValue=function(){var e=this.removePrefixAndSuffix(this.element.value);return e=this.removeZeros(e.replace(this.accept,"")),this.reverseIfNeeded(e)},n.prototype.removePrefixAndSuffix=function(e){return e.replace(this.prefix,"").replace(this.suffix,"")},n.prototype.reverseIfNeeded=function(e){if(this.dir!==l.BACKWARD)return e;for(var t="",r=e.length;r;)t+=e[--r];return t},n.prototype.removeZeros=function(e){return this.zeroPadEnabled?e.replace(this.dir===l.FORWARD?/0*$/:/^0*/,""):e},n.getAutoMask=function(e){if(e.autoMask)return e.autoMask;var t=new n;return t.dir=e.getAttribute(r.DIRECTION)||l.FORWARD,t.prefix=e.getAttribute(r.PREFIX)||"",t.suffix=e.getAttribute(r.SUFFIX)||"",t.pattern=t.reverseIfNeeded(e.getAttribute(r.PATTERN)),t.showMask="true"===(e.getAttribute(r.SHOW_MASK)+"").toLowerCase()||!1,t.accept=new RegExp("[^"+(e.getAttribute(r.ACCEPT)||"\\d")+"]","g"),t.element=e,t.zeroPadEnabled=-1!==t.pattern.indexOf("0"),e.maxLength=t.pattern.length+t.prefix.length+t.suffix.length+1,e.autoMask=t},n);function n(){}var i,u=document;function o(e,t){for(var r=p.getAutoMask(e),n=r.pattern.length,i=r.getRawValue(),u="",o=r.selection,a=0,f=!1;!d(r.pattern.charAt(o-1));)o+=null===t?-1:1;for(var s=0;s<n;s++){var c=r.pattern.charAt(s);if(h(i,a)){if(f&&(f=!0,s<o&&(o=s)),!r.showMask&&!A(r.pattern,s)){if(0===s)return;break}u+=c}else u+=d(c)?i.charAt(a++):c}r.value=u,void 0===o||r.dir===l.BACKWARD?r.selection=e.value.length-r.suffix.length:r.selection=o+r.prefix.length}function h(e,t){return t<0||t>=e.length}function d(e){return function(t,e){return e.some(function(e){return t===e})}(e,["_","0",""])}function A(e,t){for(;!h(e,t);){var r=e.charAt(t++);if("0"===r)return!0;if("_"===r)return!1}return!1}i=function(){function e(){var t=r[--n];o(t,null),t.addEventListener("input",function(e){o(t,e.data)},!0)}for(var r=function(e){return u.querySelectorAll(e)}('[type="mask"]'),n=r.length;n;)e()},u.addEventListener("DOMContentLoaded",function(){i()})}();